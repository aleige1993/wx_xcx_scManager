<!--pages/laundryOrder/index.wxml-->
<view class='laundryOrder'>
  <view class='order_soso'>
    <van-search value="{{ searchForm.orderNo }}" placeholder="搜索订单/电话号码" use-action-slot bind:search="onSearch" bind:change="onChange">
      <view slot="action" bind:tap="onSearch">搜索</view>
    </van-search>
  </view>
  <view class='order-panl'>
    <van-tabs active="{{tabStatusActive}}" bind:click="tabStatus">
      <van-tab data-status="2" title="新订单"></van-tab>
      <!-- <van-tab data-status="4" title="洗衣中"></van-tab> -->
      <van-tab data-status="5" title="洗衣完成"></van-tab>
      <van-tab data-status="6" title="已洗待取"></van-tab>
      <!-- <van-tab data-status="7" title="待用户确认"></van-tab> -->
      <van-tab data-status="8" title="已完成"></van-tab>
      <!-- <van-tab data-status="9" title="已拒绝"></van-tab> -->
    </van-tabs>
    <!-- {{searchForm.status}} -->

    <view wx:if="{{ orderList &&  !orderList.length}}" class='laundry-list null-data margin-top'>
      <icon class='iconfont  icon-tiaobochuku'></icon>
      <view>暂无数据</view>
    </view>

    <view wx:if="{{ orderList &&  orderList.length}}"  class="section">
      <view wx:for="{{orderList}}" wx:key="{{item.orderNo}}" class='order_panl'>
        <view class='order_title'>
          <view>订单编号：{{item.orderNo}}</view>
          <view>联系电话：{{item.mobile}}</view>
        </view>
        <view class='order_box'>
          <view wx:for="{{item.orderGoods}}" wx:key="{{item.orderNo}}" wx:for-item="goodsItem" class='move_box'>
            <image src='{{goodsItem.picUrl}}'></image>
            <view class='order_vim'>
              <view>{{goodsItem.goodName}}</view>
              <view class='c-red'>￥{{goodsItem.price}}</view>
            </view>
            <view class='order_num'>×{{goodsItem.num}}</view>
          </view>
        </view>
        <view class='order_footer'>
          <view>
            已付金额：
            <text class='c-red'>¥{{item.paymentAmount}}</text>
            <!-- 优惠：<text class='c-red'>¥{{item.discounts}}</text> -->
          </view>
          <view wx:if="{{ searchForm.status === '2' }}">
            <button class='danger' data-msg="拒单成功" data-orderno="{{item.orderNo}}" data-status="9" bindtap='editOrderStatus'>拒绝接单</button>
            <button data-orderno="{{item.orderNo}}" data-status="3" data-msg="接单成功" bindtap='editOrderStatus'>确认接单</button>
          </view>
          <view wx:if="{{ searchForm.status === '5' }}">
            <button data-orderno="{{item.orderNo}}" data-status="6" data-msg="操作成功" bindtap='editOrderStatus'>收到衣服</button>
          </view>
          <view wx:if="{{ searchForm.status === '6' }}">
            <button data-orderno="{{item.orderNo}}" data-status="7" data-msg="操作成功" bindtap='editOrderStatus'>确认交付</button>
          </view>
        </view>
      </view>


    </view>
  </view>

</view>


<van-dialog id="van-dialog" />